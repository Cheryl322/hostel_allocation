<mvc:View controllerName="project1.subsystem.hostelAllocation.controller.UpdateRoomAssignment"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form">
    <Page id="updateRoomPage"
        title="{i18n>roomAllocation.updateRoomAssignment}"
        showNavButton="true"
        navButtonPress=".onNavBack">
        <content>
            <MessageStrip id="successMessage"
                text="{i18n>roomAllocation.updateSuccess}"
                type="Success"
                visible="false"
                class="sapUiMediumMarginBottom"/>

            <VBox class="sapUiMediumMargin">
                <form:SimpleForm id="updateForm"
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="4"
                    labelSpanL="4"
                    labelSpanM="4"
                    labelSpanS="12"
                    columnsXL="1"
                    columnsL="1"
                    columnsM="1"
                    singleContainerFullSize="false">
                    <form:content>
                        
                        <Label text="{i18n>roomAllocation.selectStudent}"/>
                        <Select id="studentSelect"
                            selectedKey="{view>/selectedStudentId}"
                            change=".onStudentChange"
                            items="{view>/studentsWithAssignment}">
                            <core:Item key="{id}" text="{name} (ID: {id})"/>
                        </Select>

                        <Label text="{i18n>roomAllocation.currentRoom}"/>
                        <Input id="currentRoomInput"
                            value="{view>/currentRoomId}"
                            editable="false"/>

                        <Label text="{i18n>roomAllocation.newRoom}"/>
                        <Select id="newRoomSelect"
                            selectedKey="{view>/selectedNewRoomId}"
                            change=".onRoomChange"
                            items="{view>/availableRooms}">
                            <core:Item key="{roomNumber}" text="{roomNumber} (剩余: {available})"/>
                        </Select>

                    </form:content>
                </form:SimpleForm>

                <Button id="confirmUpdateBtn"
                    text="{i18n>roomAllocation.confirmUpdate}"
                    type="Emphasized"
                    press=".onConfirmUpdate"
                    enabled="false"
                    class="sapUiMediumMarginTop"/>
            </VBox>
        </content>
    </Page>
</mvc:View>